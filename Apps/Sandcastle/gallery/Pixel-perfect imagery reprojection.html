<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="description" content="Asynchronous, on-demand imagery reprojection that preserves pixel-level detail when visible.">
    <meta name="cesium-sandcastle-labels" content="Beginner, Showcases">
    <title>Cesium Demo</title>
    <script type="text/javascript" src="../Sandcastle-header.js"></script>
    <script type="text/javascript" src="../../../ThirdParty/requirejs-2.1.20/require.js"></script>
    <script type="text/javascript">
    require.config({
        baseUrl : '../../../Source',
        waitSeconds : 60
    });
    </script>
</head>
<body class="sandcastle-loading" data-sandcastle-bucket="bucket-requirejs.html">
<style>
    @import url(../templates/bucket.css);
</style>
<div id="cesiumContainer" class="fullSize"></div>
<div id="loadingOverlay"><h1>Loading...</h1></div>
<div id="toolbar"></div>
<script id="cesium_sandcastle_script">
function startup(Cesium) {
    'use strict';
//Sandcastle_Begin

var mollweideProjection = new Cesium.Proj4Projection({
    wellKnownText : '+proj=moll +lon_0=0 +x_0=0 +y_0=0 +a=6371000 +b=6371000 +units=m +no_defs'
});
var geographicProjection = new Cesium.GeographicProjection();

var viewer = new Cesium.Viewer('cesiumContainer', {
    sceneMode : Cesium.SceneMode.SCENE2D,
    imageryProvider : Cesium.createTileMapServiceImageryProvider({
        url : Cesium.buildModuleUrl('Assets/Textures/NaturalEarthII')
    }),
    mapProjection : geographicProjection
});

var pixelPerfectReprojection = new Cesium.ImageryMosaic({
    urls : ['../../SampleData/Brazil_elevation_ESRI53009.png'],
    projectedRectangles : [new Cesium.Rectangle(-8309084.8709259927272797,-6474832.4202510649338365,-2331162.9914685478433967,1661637.9380288750398904)],
    projections : [mollweideProjection],
    scene : viewer.scene,
    concurrency : 1,
    flipY : true
}, viewer);

var layers = viewer.imageryLayers;

var geographicLayer = layers.addImageryProvider(new Cesium.SingleTileImageryProvider({
    url : '../../SampleData/Brazil_elevation_EPSG4326.png',
    rectangle : Cesium.Rectangle.fromDegrees(-83.0049972999999994,-55.9523302142549284,-33.4586659819903787,13.5018063000000001)
}));

geographicLayer.show = false;

Sandcastle.addToolbarButton('Toggle geographic layer', function() {
    geographicLayer.show = !geographicLayer.show;
});

//Sandcastle_End
    Sandcastle.finishedLoading();
}
if (typeof Cesium !== 'undefined') {
    startup(Cesium);
} else if (typeof require === 'function') {
    require(['Cesium'], startup);
}
</script>
</body>
</html>
